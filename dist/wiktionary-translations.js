!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("iso-639-1"),require("axios")):"function"==typeof define&&define.amd?define(["iso-639-1","axios"],e):"object"==typeof exports?exports.wiktionaryTransations=e(require("iso-639-1"),require("axios")):t.wiktionaryTransations=e(t[void 0],t.axios)}(this,(function(t,e){return(()=>{"use strict";var r={300:t=>{t.exports=e},95:e=>{e.exports=t}},s={};function a(t){var e=s[t];if(void 0!==e)return e.exports;var i=s[t]={exports:{}};return r[t](i,i.exports,a),i.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};return(()=>{a.r(i),a.d(i,{default:()=>n});var t=a(95),e=a.n(t),r=a(300),s=a.n(r);const n=class extends class{srcLang;trgtLang;#t;constructor(t,e){this.srcLang=t,this.trgtLang=e,this.#t={action:"query",format:"json",origin:"*"}}#e(t){return t.replace(t[0],t[0].toUpperCase())}#r(t){return`https://${t}.wiktionary.org/w/api.php?`}#s(t,e){return{...this.#t,prop:"iwlinks",iwlimit:"max",iwprefix:t,titles:`${e}|${e}/translations|${this.#e(e)}`}}#a(t,e){return{...this.#t,prop:"langlinks|links",lllimit:"max",pllimit:"max",lllang:t,titles:e}}#i(t){return{...this.#t,prop:"categories",titles:t}}#n(t){return{...this.#t,prop:"pageimages",piprop:"original",titles:t}}async iwLinksDataSrc(t){try{const e=await s().get(this.#r(this.srcLang),{params:this.#s(this.trgtLang,t)});if(!e||!e.data||!e.data.query)throw new Error("Invalid request");if(200!==e.status||!e.data.query.pages)throw new Error("Request to the server unsuccessful");return Object.values(e.data.query.pages)}catch(t){console.log(t)}}async linksDataSrc(t){try{const e=await s().get(this.#r(this.srcLang),{params:this.#a(this.trgtLang,t)});if(!e||!e.data||!e.data.query)throw new Error("Invalid request");if(200!==e.status||!e.data.query.pages)throw new Error("Request to the server unsuccessful");return Object.values(e.data.query.pages)}catch(t){console.log(t)}}async linksDataTrgt(t){try{const e=await s().get(this.#r(this.trgtLang),{params:this.#a("no langlinks",t)});if(!e||!e.data||!e.data.query)throw new Error("Invalid request");if(200!==e.status||!e.data.query.pages)throw new Error("Request to the server unsuccessful");return Object.values(e.data.query.pages)}catch(t){console.log(t)}}async categoriesDataTrgt(t){try{const e=await s().get(this.#r(this.trgtLang),{params:this.#i(t.join("|"))});if(!e||!e.data||!e.data.query)throw new Error("Invaalid request");if(200!==e.status||!e.data.query.pages)throw new Error("Request to the server unsuccessful");return Object.values(e.data.query.pages).filter((t=>t.pageid))}catch(t){console.log(t)}}async imageUrls(t){try{const e=await s().get(this.#r(this.srcLang),{params:this.#n(t)});if(!e)throw new Error("Invalid request");if(!e.data||!e.data.query)throw new Error("Request img urls unsuccessful");return Object.values(e.data.query.pages).map((t=>t.original.source))}catch(t){console.log(t)}}}{#o;constructor(t,e){super(t,e),this.#o=["ae","lu","nd","nr","oj"],this.validateCodes([t,e])}validateCodes(t){const[r,s]=t;try{t.forEach((t=>{if(!e().validate(t)||this.#o.includes(t))throw new Error(`Invalid code: ${t}`)}))}catch(t){console.log(t)}}async iwLinksSrc(t){try{const e=await this.iwLinksDataSrc(t);if(!e)throw new Error("iWLinks request was unsuccessful");const[r]=e.filter((t=>t.iwlinks));if(!r)return!1;const s=r.iwlinks.map((t=>t["*"]));return!!s.length&&s}catch(t){console.log(t)}}async linksSrc(t){try{const e=await this.linksDataSrc(t);if(!e)throw new Error("links request was unsuccessful");const[r]=e;return!(!r.langlinks||!r.links)&&r.links.map((t=>t.title)).filter((e=>e!==t))}catch(t){console.log(t)}}async linksTrgt(t){const e=await this.linksDataTrgt(t);if(!e)throw new Error("links request was unsuccessful");const[r]=e.filter((t=>t.links));if(!r)return!1;const s=r.links.map((t=>t.title)).filter((e=>e!==t));return!!s.length&&s}async categoriesParse(t){const e=await this.linksSrc(t),r=await this.linksTrgt(t);if(!e||!r)return!1;const s=e.filter((t=>r.includes(t))),a=(await this.categoriesDataTrgt(s)).filter((t=>t.categories)).map((t=>({title:t.title,categories:t.categories.map((t=>t.title))}))).filter((t=>this.#l(t.categories))).map((t=>t.title));return!!a.length&&a}async getTranslations(t){const e=t.toLowerCase(),r=await this.iwLinksSrc(e);if(r)return this.#c(r);const s=await this.categoriesParse(e);return!!s&&this.#c(s)}async getImageUrls(t){const e=t.toLowerCase();return await this.imageUrls(e)}#l(t){const r=t.join(" ");return!(!(a=e().getNativeName(this.trgtLang),new RegExp(`:?${a}`,"gi")).test(r)||(s=this.srcLang,new RegExp(`:${s}`,"gi")).test(r));var s,a}#c(t){const e=/([^\/]+$)/;return t.map((t=>e.test(t)?t.match(e)[0]:t))}}})(),i})()}));